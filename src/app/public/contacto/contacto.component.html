<div class="container animated fast">
  <div class="row justify-content-center">
    <div class="col-auto txt-center">
      <h3 class="contacto-txt">Agendar Reunión</h3>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-12 col-lg-6">
      <form
        class="d-flex flex-column justify-content-center"
        [formGroup]="formularioContacto"
        (ngSubmit)="enviarFormulario()"
      >
        <div class="mb-3">
          <label for="exampleInputEmail1" class="mb-2 txt-neon">Empresa </label>
          <span *ngIf="errorEmpresa" class="contacto-text-error m-2">*</span>
          <input
            formControlName="empresa"
            type="text"
            [ngClass]="{ 'contacto-input-error': errorEmpresa }"
            class="form-control"
            id="exampleInputEmail1"
            aria-describedby="emailHelp"
          />
          <div id="emailHelp" class="form-text">
            Nombre de la empresa, si es un particular nombre completo.
          </div>
        </div>

        <div class="mb-3">
          <label for="exampleInputEmail1" class="mb-2 txt-neon">Correo</label>
          <span *ngIf="errorCorreo" class="contacto-text-error m-2">*</span>

          <input
            formControlName="correo"
            type="email"
            [ngClass]="{ 'contacto-input-error': errorCorreo }"
            class="form-control"
            id="exampleInputEmail1"
            aria-describedby="emailHelp"
          />
          <div id="emailHelp" class="form-text">
            Correo de RRHH en caso de que necesite contactarme con ustedes.
          </div>
        </div>
        <div class="mb-3 d-flex flex-column">
          <div>
            <label class="mb-1 txt-neon">Fecha de Reunión </label>
            <span *ngIf="errorFecha" class="contacto-text-error m-2">*</span>
          </div>
          <div class="">
            <input
              [disabled]="true"
              formControlName="fecha"
              class="contacto-input-fecha"
              [ngClass]="{ 'contacto-input-error': errorFecha }"
              matInput
              [matDatepicker]="picker2"
              placeholder="Día/Mes/Año"
            />
            <mat-datepicker-toggle
              class="btn-fecha"
              matSuffix
              [for]="picker2"
            ></mat-datepicker-toggle>

            <mat-datepicker #picker2 [disabled]="false"></mat-datepicker>
          </div>
          <div class="form-text">Seleccione una fecha del calendario.</div>
        </div>
        <div class="mb-3">
          <label class="mb-1 txt-neon">Tipo de Reunión </label>
          <div class="mb-1 d-flex flex-row justify-content-around">
            <div class="m-1 form-check">
              <input
                formControlName="tipoReunion"
                class="form-check-input"
                type="radio"
                id="flexRadioDefault1"
                value="presencial"
              />
              <label class="txt-neon" for="flexRadioDefault1">
                Presencial
              </label>
            </div>
            <div class="m-1 form-check">
              <input
                formControlName="tipoReunion"
                class="form-check-input"
                type="radio"
                id="flexRadioDefault2"
                value="online"
              />
              <label class="txt-neon" for="flexRadioDefault2"> Online </label>
            </div>
          </div>
          <div *ngIf="reunion === 'online'" class="mb-3 animated fadeIn">
            <label for="exampleInputEmail1" class="mb-2 txt-neon">URL</label>
            <input
              type="text"
              class="form-control"
              id="exampleInputEmail1"
              aria-describedby="emailHelp"
            />
            <div id="emailHelp" class="form-text">
              URL de Meet o de Zoom otros URL no pasaran la verificación.
            </div>
          </div>
        </div>
        <div *ngIf="reunion === 'presencial'" class="mb-2 animated fadeIn">
          <label for="exampleInputEmail1" class="txt-neon"
            >Dirección de la reunión
          </label>
          <span
            *ngIf="
              validEmpresa &&
              validCorreo &&
              validFecha &&
              marcadores.length == 0
            "
            class="contacto-text-error m-2"
            >*</span
          >
          <div
            *ngIf="validEmpresa && validCorreo && validFecha"
            class="form-text"
          >
            Click sobre la ubicación de la reunión.
          </div>
          <div
            *ngIf="!validEmpresa && !validCorreo && !validFecha"
            class="form-text mb-3"
          >
            Completar los campos empresa, correo y fecha para poder indicar la
            ubicación.
          </div>

          <div
            [ngClass]="{
              'contacto-input-error':
                !validEmpresa &&
                !validCorreo &&
                !validFecha &&
                marcadores.length == 0
            }"
            class="mb-3 contacto-mapa"
          >
            <agm-map
              [zoom]="13"
              [latitude]="lat"
              [longitude]="lng"
              (mapClick)="agregarMarcador($event)"
            >
              <agm-marker
                id="mapa-google"
                *ngFor="let marcador of marcadores; let i = index"
                [latitude]="marcador.lat"
                [longitude]="marcador.lng"
              >
                <agm-info-window>
                  <div>
                    <strong class="color-negro">{{ marcador.titulo }}</strong>
                    <p class="color-negro">{{ marcador.correo }}</p>
                    <p class="color-negro">
                      {{ marcador.fecha | date: "fullDate" }}
                    </p>
                  </div>
                </agm-info-window>
              </agm-marker>
            </agm-map>
          </div>
        </div>

        <div class="mb-3 form-floating">
          <div>
            <label for="exampleInputEmail1" class="mb-2 txt-neon"
              >Mensaje
            </label>
            <span *ngIf="errorMensaje" class="contacto-text-error m-2">*</span>
          </div>
          <div>
            <textarea
              formControlName="mensaje"
              class="form-control"
              [ngClass]="{ 'contacto-input-error': errorMensaje }"
              placeholder="Escriba un mensaje"
              id="floatingTextarea2"
              style="height: 100px"
            ></textarea>
          </div>
        </div>
        <button type="submit" class="btn-contacto">Enviar</button>
      </form>
    </div>
  </div>
</div>
