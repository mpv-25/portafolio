<div class="container animated fast">
  <div class="row justify-content-center">
    <div class="col-auto txt-center">
      <h3 class="contacto-txt">Agendar Entrevista</h3>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-12 col-lg-6">
      <form
        class="d-flex flex-column justify-content-center"
        [formGroup]="formularioContacto"
        (ngSubmit)="enviarFormulario()"
      >
        <div class="mb-3">
          <label for="exampleInputEmail1" class="mb-2 txt-neon">Empresa </label>
          <span *ngIf="errorEmpresa" class="text-danger m-2 fs-6">*</span>
          <input
            formControlName="empresa"
            type="text"
            [ngClass]="{ 'contacto-input-error': errorEmpresa }"
            class="form-control"
            id="exampleInputEmail1"
            aria-describedby="emailHelp"
          />
          <div id="emailHelp" class="form-text">
            Nombre de la empresa, si es un particular nombre completo.
          </div>
        </div>

        <div class="mb-3">
          <label for="exampleInputEmail1" class="mb-2 txt-neon">Correo</label>
          <span *ngIf="errorCorreo" class="text-danger m-2 fs-6">*</span>

          <input
            formControlName="correo"
            type="email"
            [ngClass]="{ 'contacto-input-error': errorCorreo }"
            class="form-control"
            id="exampleInputEmail1"
            aria-describedby="emailHelp"
          />
          <div id="emailHelp" class="form-text">
            Correo de RRHH en caso de que necesite contactarme con ustedes.
          </div>
        </div>
        <div class="mb-3">
          <label class="mb-1 txt-neon">Fecha de Reunión </label>
          <span *ngIf="errorFecha" class="text-danger m-2 fs-6">*</span>
          <input
            formControlName="fecha"
            class="contacto-input-fecha"
            [ngClass]="{ 'contacto-input-error': errorFecha }"
            matInput
            [matDatepicker]="picker2"
            placeholder="Día/Mes/Año"
          />
          <mat-datepicker-toggle
            class="btn-fecha"
            matSuffix
            [for]="picker2"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </div>
        <div class="mb-3">
          <label class="mb-1 txt-neon">Tipo de Reunión </label>
          <div class="mb-1 d-flex flex-row justify-content-around">
            <div class="m-1 form-check">
              <input
                formControlName="tipoReunion"
                class="form-check-input"
                type="radio"
                id="flexRadioDefault1"
                value="presencial"
              />
              <label class="txt-neon" for="flexRadioDefault1">
                Presencial
              </label>
            </div>
            <div class="m-1 form-check">
              <input
                formControlName="tipoReunion"
                class="form-check-input"
                type="radio"
                id="flexRadioDefault2"
                value="online"
              />
              <label class="txt-neon" for="flexRadioDefault2"> Online </label>
            </div>
          </div>
	  <div *ngIf="reunion === 'online'" class="mb-3 animated fadeIn">
            <label for="exampleInputEmail1" class="mb-2 txt-neon">URL</label>
            <input
              type="text"
              class="form-control"
              id="exampleInputEmail1"
              aria-describedby="emailHelp"
            />
            <div id="emailHelp" class="form-text">
              URL de Meet o de Zoom otros URL no pasaran la verificación.
            </div>
          </div>
        </div>
	<div *ngIf="reunion === 'presencial'" class="mb-3 animated fadeIn">
          <label for="exampleInputEmail1" class="mb-2 txt-neon"
            >Dirección de la reunión
          </label>
          <span
            *ngIf="
              validEmpresa &&
              validCorreo &&
              validFecha &&
              marcadores.length == 0
            "
            class="text-danger m-2 fs-6"
            >*</span
          >
          <div
            *ngIf="validEmpresa && validCorreo && validFecha"
            class="form-text"
          >
            Click sobre la ubicación de la reunión.
          </div>
          <div
            *ngIf="!validEmpresa && !validCorreo && !validFecha"
            class="form-text"
          >
            Completar los campos empresa, correo y fecha para poder indicar la
            ubicación.
          </div>

          <div
            [ngClass]="{
              'contacto-input-error':
                !validEmpresa &&
                !validCorreo &&
                !validFecha &&
                marcadores.length == 0
            }"
            class="mb-3 contacto-mapa"
          >
            <agm-map
              [zoom]="13"
              [latitude]="lat"
              [longitude]="lng"
              (mapClick)="agregarMarcador($event)"
            >
              <agm-marker
                id="mapa-google"
                *ngFor="let marcador of marcadores; let i = index"
                [latitude]="marcador.lat"
                [longitude]="marcador.lng"
              >
                <agm-info-window>
                  <div>
                    <strong class="color-negro">{{ marcador.titulo }}</strong>
                    <p class="color-negro">{{ marcador.correo }}</p>
                    <p class="color-negro">
                      {{ marcador.fecha | date: "fullDate" }}
                    </p>
                  </div>
                </agm-info-window>
              </agm-marker>
            </agm-map>
          </div>
        </div>

        <div class="mb-3 form-floating">
          <textarea
            formControlName="mensaje"
            class="form-control"
            [ngClass]="{ 'contacto-input-error': errorMensaje }"
            placeholder="Leave a comment here"
            id="floatingTextarea2"
            style="height: 100px"
          ></textarea>
          <label for="floatingTextarea2">Mensaje</label>
        </div>

        <button type="submit" class="btn-contacto">Enviar</button>
      </form>
    </div>
  </div>
</div>
